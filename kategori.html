<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <title>Halaman Daftar Kategori</title>
</head>
<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
          <ul class="nav navbar-nav">
            <li><a href="index.html">Daftar Produk</a></li>
            <li><a href="kategori.html">Kategori Produk</a></li>
            <li><a href="konsumen.html">Transaksi Penjualan</a></li>
            <li><a href="penjualan.html">Konsumen</a></li>
          </ul>
        </div>
        </nav>
    <div class="container-fluid"> 
    <h1>Daftar Kategori</h1>
    <form id="form-kategori" action="" onsubmit="event.preventDefault(); tambahKategori(this)">
        <input name="index" type="hidden" value="-1">
        <div>
            <label for="nama">Nama Kategori</label>
        </div>
        <div>
            <input type="text" id="nama" name="nama">
        </div>
        <div style="padding-top: 10px;">
            <button id="btn-save-kategori">Simpan</button>
        </div>
    </form>
    <div id="daftar-kategori">
    </div>
    <script>
        function tambahKategori(form) {
        console.log(form);
        aplikasiDaftarKategori.inputKategori(form);
        aplikasiDaftarKategori.menampilkanDaftarKategori();
}

const aplikasiDaftarKategori = {
    kategori: {
        index: -1,
        nama: null
    },
    daftarKategori: [],
    inputKategori: function (form) {
        this.kategori.index = form.index.value;
        this.kategori.nama = form.nama.value;

        if(!this.kategori.nama) {
            alert('Nama tidak boleh kosong!');
            return false;
        }

        if(this.kategori.index == -1) {
            this.daftarKategori.push(copy(this.kategori));
        } else {
            this.daftarKategori[this.kategori.index] = copy(this.kategori)
        }

        this.resetFormKategori(form);
    },
    resetFormKategori: function (form) {
        this.kategori.nama = null;
        this.kategori.index = -1;

        form.nama.value = this.kategori.nama;
        form.index.value = this.kategori.index;

        document.getElementById('btn-save-kategori').innerHTML = 'Simpan';
    },
    menampilkanDaftarKategori: function () {
        const componentDaftarKategori = document.getElementById('daftar-kategori');
        componentDaftarKategori.innerHTML = '';
        this.daftarKategori.forEach((kategori, index) => {
            componentDaftarKategori.innerHTML += `${kategori.nama} <button onclick="aplikasiDaftarKategori.editKategori(${index})">Edit</button> <button onclick="aplikasiDaftarKategori.hapusKategori(${index})">Hapus</button>`;
        });
    },
    hapusKategori: function (index) {
        if(confirm('Apakah anda yakin ingin menghapus data ini ?')) {
            this.daftarKategori.splice(index, 1);
            this.menampilkanDaftarKategori();
        }
    },
    editKategori: function (index) {
        const kategori = this.daftarKategori[index];
        const form = document.getElementById('form-kategori');
        form.nama.value = kategori.nama;
        form.index.value = index;

        document.getElementById('btn-save-kategori').innerHTML = 'Edit';
    }
}
 
function copy(obj) {
    return JSON.parse(JSON.stringify(obj));
}
    </script>
</body>
</html>